<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>EV vs ICE – Trip Cost Calculator</title>

<style>
    :root {
        --primary: #2563eb;
        --success: #16a34a;
        --danger:  #dc2626;
        --light:   #f8fafc;
        --gray:    #64748b;
        --dark:    #0f172a;
        --card:    #ffffff;
        --border:  #e2e8f0;
        --ev-bg:   #e0f2fe;
    }

    body {
        font-family: system-ui, -apple-system, BlinkMacOSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #f0f7ff 0%, #e0f2fe 100%);
        color: var(--dark);
        margin: 0;
        padding: 12px 10px;
        font-size: 15px;
        line-height: 1.42;
    }

    h1, h2 { margin: 0.8em 0; text-align: center; }
    h1 { font-size: 1.8rem; color: #1d4ed8; }
    h2 { font-size: 1.35rem; margin-top: 1.8rem; }

    .card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 16px rgba(0,0,0,0.07);
        padding: 1.2rem 1rem;
        margin-bottom: 1.8rem;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin: 0.7rem 0;
        font-size: 0.93rem;
    }

    th, td {
        padding: 8px 9px;
        border: 1px solid #dfe6ed;
    }

    th {
        background: #f0f7ff;
        color: #1d4ed8;
        font-weight: 600;
        font-size: 0.88rem;
    }

    input[type="number"] {
        width: 88px;
        padding: 5px 7px;
        font-size: 0.94rem;
        border: 1.5px solid #c3d4e8;
        border-radius: 6px;
    }

    input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37,99,235,0.18);
    }

    .result { color: var(--danger); font-weight: 700; }
    .success { color: var(--success); font-weight: 700; }

    .trip-stop {
        margin-bottom: 1.3rem;
        padding-bottom: 1rem;
        border-bottom: 1px dashed #ccc;
    }

    .trip-total {
        margin-top: 1.1rem;
        padding: 1rem;
        background: #f0fff4;
        border-radius: 10px;
        font-weight: 600;
    }

    .add-stop-btn {
        margin: 0.8rem 0;
        padding: 8px 16px;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 0.95rem;
        cursor: pointer;
    }

    .simulations > div { margin-bottom: 2.2rem; }

    footer {
        text-align: center;
        color: #6b7280;
        font-size: 0.83rem;
        margin: 2.8rem 0 1.2rem;
    }

    @media (min-width: 480px) {
        body { padding: 1.5rem; font-size: 16px; }
        .card { padding: 1.5rem 1.2rem; }
        input[type="number"] { width: 100px; }
    }
</style>
</head>
<body>

<h1>⚡ EV vs ICE Trip Cost Calculator</h1>

<!-- Monthly quick check (optional reference) -->
<div class="card">
    <h2>Monthly reference</h2>
    <div style="text-align:center; margin:1rem 0;">
        km/month: <input type="number" id="monthlyKm" value="500" min="100" step="100">
    </div>
    <table>
        <tr><th></th><th>Cons.</th><th>€/unit</th><th>Cost</th></tr>
        <tr><td>EV</td>    <td><input id="consEv"     value="16"   step="0.5"> kWh</td><td><input id="priceEv" value="0.39" step="0.01"></td><td class="result"><span id="costEv">31.20</span> €</td></tr>
        <tr><td>Diesel</td><td><input id="consDiesel" value="7"    step="0.5"> l</td>  <td><input id="priceDieselMonthly" value="1.40" step="0.01"></td><td class="result"><span id="costDiesel">49.00</span> €</td></tr>
        <tr><td>Petrol</td><td><input id="consPetrol" value="8"    step="0.5"> l</td>  <td><input id="pricePetrolMonthly" value="1.50" step="0.01"></td><td class="result"><span id="costPetrol">60.00</span> €</td></tr>
    </table>
</div>


<!-- ── TRIP CALCULATOR ─────────────────────────────────────────────── -->
<div class="card">
    <h2>Trip with multiple stops</h2>

    <div class="simulations">

        <!-- EV -->
        <div>
            <h2 style="color:#1e40af;">Electric – Leapmotor C10</h2>
            <div id="ev-stops"></div>

            <button class="add-stop-btn" style="background:#2563eb;" onclick="addEvStop()">+ Charging stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="ev-total-km">0</span> km</div>
                <div>Energy used:   <span id="ev-used">0.0</span> kWh</div>
                <div>Total cost:    <span id="ev-cost" class="result">0.00</span> €</div>
            </div>
        </div>


        <!-- Diesel -->
        <div>
            <h2 style="color:#7c3aed;">Diesel</h2>
            <div id="diesel-stops"></div>

            <button class="add-stop-btn" style="background:#7c3aed;" onclick="addDieselStop()">+ Refuel stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="diesel-total-km">0</span> km</div>
                <div>Fuel used:     <span id="diesel-used">0.0</span> l</div>
                <div>Total cost:    <span id="diesel-cost" class="result">0.00</span> €</div>
            </div>
        </div>


        <!-- Petrol -->
        <div>
            <h2 style="color:#c2410c;">Petrol</h2>
            <div id="petrol-stops"></div>

            <button class="add-stop-btn" style="background:#c2410c;" onclick="addPetrolStop()">+ Refuel stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="petrol-total-km">0</span> km</div>
                <div>Fuel used:     <span id="petrol-used">0.0</span> l</div>
                <div>Total cost:    <span id="petrol-cost" class="result">0.00</span> €</div>
            </div>
        </div>

    </div>
</div>

<footer>Mathias' EV/ICE trip planner • January 2026</footer>

<script>
// Global consumption (can be changed in monthly section)
let CONS_EV     = 16;
let CONS_DIESEL = 7;
let CONS_PETROL = 8;

document.getElementById('consEv')    .oninput = e => CONS_EV     = +e.target.value || 16;
document.getElementById('consDiesel').oninput = e => CONS_DIESEL = +e.target.value || 7;
document.getElementById('consPetrol').oninput = e => CONS_PETROL = +e.target.value || 8;


// ── HELPERS ────────────────────────────────────────────────────────────────
function createStopHTML(type, index) {
    if (type === 'ev') {
        return `
        <div class="trip-stop" data-index="${index}">
            <strong>Stop ${index}</strong> – Charging<br>
            Charge rate: <input type="number" class="ev-kw"   value="${index===1 ? 50 : 22}" step="5" min="3"> kW<br>
            kWh added:   <input type="number" class="ev-kwh"  value="${index===1 ? 28 : 18}" step="2" min="0"><br>
            €/kWh:       <input type="number" class="ev-eur"  value="0.39" step="0.01"><br>
            Distance → next: <input type="number" class="ev-km" value="0" step="10" min="0"> km
        </div>`;
    }
    if (type === 'diesel') {
        return `
        <div class="trip-stop" data-index="${index}">
            <strong>Stop ${index}</strong> – Refuel<br>
            Liters added: <input type="number" class="di-l"   value="${index===1 ? 38 : 30}" step="5" min="0"><br>
            €/liter:      <input type="number" class="di-eur" value="1.40" step="0.01"><br>
            Distance → next: <input type="number" class="di-km" value="0" step="10" min="0"> km
        </div>`;
    }
    // petrol
    return `
    <div class="trip-stop" data-index="${index}">
        <strong>Stop ${index}</strong> – Refuel<br>
        Liters added: <input type="number" class="pe-l"   value="${index===1 ? 35 : 28}" step="5" min="0"><br>
        €/liter:      <input type="number" class="pe-eur" value="1.50" step="0.01"><br>
        Distance → next: <input type="number" class="pe-km" value="0" step="10" min="0"> km
    </div>`;
}


// ── EV ─────────────────────────────────────────────────────────────────────
function addEvStop() {
    const cont = document.getElementById('ev-stops');
    const idx = cont.children.length;
    cont.insertAdjacentHTML('beforeend', createStopHTML('ev', idx));
    updateAllTrips();
}

function calcEv() {
    const stops = document.querySelectorAll('#ev-stops .trip-stop');
    if (stops.length === 0) return {km:0, used:0, cost:0};

    let soc = 95; // starting assumption
    let totalKm = 0;
    let totalUsed = 0;
    let totalCost = 0;

    stops.forEach(stop => {
        const km = +stop.querySelector('.ev-km').value || 0;
        const used = (km / 100) * CONS_EV;
        totalKm += km;
        totalUsed += used;

        // charging happens before driving away (except start)
        const addedKwh = +stop.querySelector('.ev-kwh')?.value || 0;
        const price    = +stop.querySelector('.ev-eur')?.value || 0.39;
        if (addedKwh > 0) {
            totalCost += addedKwh * price;
            soc += (addedKwh / 70) * 100;
        }
        soc -= (used / 70) * 100;
    });

    return {km: totalKm, used: totalUsed, cost: totalCost};
}


// ── Diesel / Petrol (very similar) ─────────────────────────────────────────
function addDieselStop() {
    const cont = document.getElementById('diesel-stops');
    const idx = cont.children.length;
    cont.insertAdjacentHTML('beforeend', createStopHTML('diesel', idx));
    updateAllTrips();
}

function calcDiesel() {
    const stops = document.querySelectorAll('#diesel-stops .trip-stop');
    if (stops.length === 0) return {km:0, used:0, cost:0};

    let tank = 90; // starting %
    let totalKm = 0;
    let totalUsed = 0;
    let totalCost = 0;

    stops.forEach(stop => {
        const km = +stop.querySelector('.di-km').value || 0;
        const used = (km / 100) * CONS_DIESEL;
        totalKm += km;
        totalUsed += used;

        const addedL = +stop.querySelector('.di-l')?.value || 0;
        const price  = +stop.querySelector('.di-eur')?.value || 1.40;
        if (addedL > 0) {
            totalCost += addedL * price;
            tank += (addedL / 50) * 100;
        }
        tank -= (used / 50) * 100;
    });

    return {km: totalKm, used: totalUsed, cost: totalCost};
}


function addPetrolStop() {
    const cont = document.getElementById('petrol-stops');
    const idx = cont.children.length;
    cont.insertAdjacentHTML('beforeend', createStopHTML('petrol', idx));
    updateAllTrips();
}

function calcPetrol() {
    // almost identical to diesel
    const stops = document.querySelectorAll('#petrol-stops .trip-stop');
    if (stops.length === 0) return {km:0, used:0, cost:0};

    let tank = 90;
    let totalKm = 0;
    let totalUsed = 0;
    let totalCost = 0;

    stops.forEach(stop => {
        const km = +stop.querySelector('.pe-km').value || 0;
        const used = (km / 100) * CONS_PETROL;
        totalKm += km;
        totalUsed += used;

        const addedL = +stop.querySelector('.pe-l')?.value || 0;
        const price  = +stop.querySelector('.pe-eur')?.value || 1.50;
        if (addedL > 0) {
            totalCost += addedL * price;
            tank += (addedL / 50) * 100;
        }
        tank -= (used / 50) * 100;
    });

    return {km: totalKm, used: totalUsed, cost: totalCost};
}


function updateAllTrips() {
    // EV
    const ev = calcEv();
    document.getElementById('ev-total-km').textContent = ev.km;
    document.getElementById('ev-used').textContent     = ev.used.toFixed(1);
    document.getElementById('ev-cost').textContent     = ev.cost.toFixed(2);

    // Diesel
    const di = calcDiesel();
    document.getElementById('diesel-total-km').textContent = di.km;
    document.getElementById('diesel-used').textContent     = di.used.toFixed(1);
    document.getElementById('diesel-cost').textContent     = di.cost.toFixed(2);

    // Petrol
    const pe = calcPetrol();
    document.getElementById('petrol-total-km').textContent = pe.km;
    document.getElementById('petrol-used').textContent     = pe.used.toFixed(1);
    document.getElementById('petrol-cost').textContent     = pe.cost.toFixed(2);
}


// Initial setup + listeners
document.addEventListener('input', e => {
    if (e.target.matches('input[type="number"]')) {
        updateAllTrips();
    }
});

// Add at least one realistic first stop for each
addEvStop();
addDieselStop();
addPetrolStop();

// First calculation
updateAllTrips();
</script>
</body>
</html>
