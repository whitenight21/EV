<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Leapmotor C10 – Cost & Trip Calculator</title>
    <style>
        :root {
            --primary:    #2563eb;
            --primary-d:  #1d4ed8;
            --success:    #16a34a;
            --danger:     #dc2626;
            --light:      #f8fafc;
            --gray:       #64748b;
            --dark:       #0f172a;
            --card-bg:    #ffffff;
            --border:     #e2e8f0;
            --ev-bg:      #e0f2fe;
        }

        * { box-sizing: border-box; }

        body {
            font-family: system-ui, -apple-system, BlinkMacOSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f7ff 0%, #e0f2fe 100%);
            color: var(--dark);
            margin: 0;
            padding: 12px;
            font-size: 15px;
            line-height: 1.45;
        }

        h1 { font-size: 1.8rem; text-align: center; color: var(--primary-d); margin: 0.8em 0; }
        h2 { font-size: 1.35rem; margin: 1.8rem 0 1rem; text-align: center; }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 5px 16px rgba(0,0,0,0.07);
            padding: 1.2rem 1rem;
            margin-bottom: 1.8rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 0.7rem 0;
            font-size: 0.93rem;
        }

        th, td {
            padding: 8px 9px;
            border: 1px solid #dfe6ed;
        }

        th {
            background: #f0f7ff;
            color: #1d4ed8;
            font-weight: 600;
            font-size: 0.88rem;
        }

        input[type="number"] {
            width: 88px;
            padding: 5px 7px;
            font-size: 0.94rem;
            border: 1.5px solid #c3d4e8;
            border-radius: 6px;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37,99,235,0.18);
        }

        .result { color: var(--danger); font-weight: 700; }
        .savings { color: var(--success); font-weight: 700; }

        .section-title {
            background: var(--primary);
            color: white;
            padding: 10px 12px;
            border-radius: 8px;
            margin: 1.4rem 0 0.9rem;
            font-size: 1.15rem;
            font-weight: 700;
        }

        .km-input { text-align: center; margin: 1.3rem 0; font-weight: 600; color: var(--primary-d); }

        .trip-stop {
            margin-bottom: 1.3rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed #ccc;
            font-size: 0.92rem;
        }

        .trip-total {
            margin-top: 1.1rem;
            padding: 1rem;
            background: #f0fff4;
            border-radius: 10px;
            font-weight: 600;
        }

        .add-stop-btn {
            margin: 0.8rem 0;
            padding: 8px 16px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
        }

        footer {
            text-align: center;
            color: #6b7280;
            font-size: 0.83rem;
            margin: 2.8rem 0 1.2rem;
        }

        @media (min-width: 480px) {
            body { padding: 1.5rem; font-size: 16px; }
            .card { padding: 1.5rem 1.2rem; }
            input[type="number"] { width: 100px; }
        }
    </style>
</head>
<body>

<h1>⚡ Leapmotor C10 – Cost & Trip Calculator</h1>

<!-- Monthly comparison -->
<div class="card">
    <div class="section-title">Monthly Cost Comparison (500 km reference)</div>
    <div class="km-input">
        <label for="monthlyKm">km/month:</label>
        <input type="number" id="monthlyKm" value="500" min="100" step="100">
    </div>

    <table>
        <tr><th>Type</th><th>Cons.</th><th>€/unit</th><th>Cost</th></tr>
        <tr class="highlight-ev">
            <td>Electric</td>
            <td><input type="number" id="consEv" value="16" step="0.5"> kWh</td>
            <td><input type="number" id="priceEv" value="0.39" step="0.01"> €</td>
            <td class="result"><span id="costEv">31.20</span> €</td>
        </tr>
        <tr>
            <td>Diesel</td>
            <td><input type="number" id="consDiesel" value="7" step="0.5"> l</td>
            <td><input type="number" id="priceDieselMonthly" value="1.40" step="0.01"> €</td>
            <td class="result"><span id="costDiesel">49.00</span> €</td>
        </tr>
        <tr>
            <td>Petrol</td>
            <td><input type="number" id="consPetrol" value="8" step="0.5"> l</td>
            <td><input type="number" id="pricePetrolMonthly" value="1.50" step="0.01"> €</td>
            <td class="result"><span id="costPetrol">60.00</span> €</td>
        </tr>
    </table>
</div>

<!-- 6h charging preview -->
<div class="card">
    <div class="section-title">6h @ 6kW (eJoin reference)</div>
    <table>
        <tr><td>Added</td><td><strong><span id="added6h">36.0</span> kWh</strong></td></tr>
        <tr><td>Cost</td><td class="result"><strong><span id="cost6h">10.44</span> €</strong></td></tr>
        <tr><td>Range +</td><td><strong><span id="range6h">225</span> km</strong></td></tr>
    </table>
</div>

<!-- NEW: TRIP COST CALCULATOR -->
<div class="card">
    <div class="section-title">Trip Cost Calculator – Multi-stop</div>

    <div style="display: flex; flex-direction: column; gap: 2.2rem;">

        <!-- EV Trip -->
        <div>
            <h2 style="color:#1e40af; margin-top:0;">Electric – Leapmotor C10</h2>
            <div id="ev-stops-container">
                <!-- Starting point -->
                <div class="trip-stop">
                    <strong>Start</strong><br>
                    Starting SoC: <input type="number" class="ev-start-soc" value="95" min="0" max="100" step="1"> %<br>
                    <small>(first distance = to first charging stop)</small>
                </div>
            </div>
            <button class="add-stop-btn" style="background:#2563eb;" onclick="addEvStop()">+ Add Charging Stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="ev-total-dist">0</span> km</div>
                <div>Energy used:   <span id="ev-total-used">0.0</span> kWh</div>
                <div>Total cost:    <span id="ev-total-cost" class="result">0.00</span> €</div>
            </div>
        </div>

        <!-- Diesel Trip -->
        <div>
            <h2 style="color:#7c3aed; margin-top:0;">Diesel – Peugeot 308</h2>
            <div id="diesel-stops-container">
                <div class="trip-stop">
                    <strong>Start</strong><br>
                    Starting level: <input type="number" class="diesel-start-level" value="90" min="0" max="100" step="1"> %<br>
                    <small>(first distance = to first refuel)</small>
                </div>
            </div>
            <button class="add-stop-btn" style="background:#7c3aed;" onclick="addDieselStop()">+ Add Refuel Stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="diesel-total-dist">0</span> km</div>
                <div>Fuel used:     <span id="diesel-total-used">0.0</span> l</div>
                <div>Total cost:    <span id="diesel-total-cost" class="result">0.00</span> €</div>
            </div>
        </div>

        <!-- Petrol Trip -->
        <div>
            <h2 style="color:#c2410c; margin-top:0;">Petrol – Peugeot 308</h2>
            <div id="petrol-stops-container">
                <div class="trip-stop">
                    <strong>Start</strong><br>
                    Starting level: <input type="number" class="petrol-start-level" value="90" min="0" max="100" step="1"> %<br>
                    <small>(first distance = to first refuel)</small>
                </div>
            </div>
            <button class="add-stop-btn" style="background:#c2410c;" onclick="addPetrolStop()">+ Add Refuel Stop</button>

            <div class="trip-total">
                <div>Total distance: <span id="petrol-total-dist">0</span> km</div>
                <div>Fuel used:     <span id="petrol-total-used">0.0</span> l</div>
                <div>Total cost:    <span id="petrol-total-cost" class="result">0.00</span> €</div>
            </div>
        </div>

    </div>
</div>

<footer>Mathias' Leapmotor C10 calculator • January 2026</footer>

<script>
// Global consumption values
let CONS_EV     = 16;
let CONS_DIESEL = 7;
let CONS_PETROL = 8;

const BATTERY_KWH = 70;
const TANK_LITERS = 50;

// Update consumption when changed in monthly section
document.getElementById('consEv')    .addEventListener('input', e => CONS_EV     = +e.target.value || 16);
document.getElementById('consDiesel').addEventListener('input', e => CONS_DIESEL = +e.target.value || 7);
document.getElementById('consPetrol').addEventListener('input', e => CONS_PETROL = +e.target.value || 8);


// ── EV Trip Logic ───────────────────────────────────────────────────────────
function addEvStop() {
    const container = document.getElementById('ev-stops-container');
    const index = container.children.length;
    const div = document.createElement('div');
    div.className = 'trip-stop';
    div.innerHTML = `
        <strong>Stop ${index} – Charging</strong><br>
        Charge rate: <input type="number" class="ev-rate" value="50" min="5" step="5"> kW<br>
        kWh added:   <input type="number" class="ev-added" value="25" min="0" step="5"><br>
        €/kWh:       <input type="number" class="ev-price" value="0.39" step="0.01"><br>
        Distance to next: <input type="number" class="ev-dist" value="180" min="0" step="10"> km
    `;
    container.appendChild(div);
    updateAllTrips();
}

function updateEvTrip() {
    const stops = document.querySelectorAll('#ev-stops-container .trip-stop');
    let soc = +document.querySelector('.ev-start-soc')?.value || 95;
    let totalDist = 0, totalUsed = 0, totalCost = 0;

    document.querySelectorAll('#ev-stops-container .ev-dist').forEach((distInput, i) => {
        const dist = +distInput.value || 0;
        const used = (dist / 100) * CONS_EV;
        totalDist += dist;
        totalUsed += used;

        // Charging happens before next segment (except after last)
        if (i < stops.length) {
            const stop = stops[i];
            const added = +stop.querySelector('.ev-added')?.value || 0;
            const price = +stop.querySelector('.ev-price')?.value || 0.39;
            totalCost += added * price;
            soc = Math.min(100, soc - (used / BATTERY_KWH * 100) + (added / BATTERY_KWH * 100));
        }
    });

    document.getElementById('ev-total-dist').textContent = totalDist;
    document.getElementById('ev-total-used').textContent = totalUsed.toFixed(1);
    document.getElementById('ev-total-cost').textContent = totalCost.toFixed(2);
}


// ── Diesel & Petrol (similar structure) ─────────────────────────────────────
function addDieselStop() {
    const container = document.getElementById('diesel-stops-container');
    const index = container.children.length;
    const div = document.createElement('div');
    div.className = 'trip-stop';
    div.innerHTML = `
        <strong>Stop ${index} – Refuel</strong><br>
        Liters added: <input type="number" class="diesel-added" value="35" min="0" step="5"><br>
        €/liter:      <input type="number" class="diesel-price" value="1.40" step="0.01"><br>
        Distance to next: <input type="number" class="diesel-dist" value="400" min="0" step="10"> km
    `;
    container.appendChild(div);
    updateAllTrips();
}

function updateDieselTrip() {
    const stops = document.querySelectorAll('#diesel-stops-container .trip-stop');
    let level = +document.querySelector('.diesel-start-level')?.value || 90;
    let totalDist = 0, totalUsed = 0, totalCost = 0;

    document.querySelectorAll('#diesel-stops-container .diesel-dist').forEach((distInput, i) => {
        const dist = +distInput.value || 0;
        const used = (dist / 100) * CONS_DIESEL;
        totalDist += dist;
        totalUsed += used;

        if (i < stops.length) {
            const stop = stops[i];
            const added = +stop.querySelector('.diesel-added')?.value || 0;
            const price = +stop.querySelector('.diesel-price')?.value || 1.40;
            totalCost += added * price;
            level = Math.min(100, level - (used / TANK_LITERS * 100) + (added / TANK_LITERS * 100));
        }
    });

    document.getElementById('diesel-total-dist').textContent = totalDist;
    document.getElementById('diesel-total-used').textContent = totalUsed.toFixed(1);
    document.getElementById('diesel-total-cost').textContent = totalCost.toFixed(2);
}

function addPetrolStop() {
    const container = document.getElementById('petrol-stops-container');
    const index = container.children.length;
    const div = document.createElement('div');
    div.className = 'trip-stop';
    div.innerHTML = `
        <strong>Stop ${index} – Refuel</strong><br>
        Liters added: <input type="number" class="petrol-added" value="35" min="0" step="5"><br>
        €/liter:      <input type="number" class="petrol-price" value="1.50" step="0.01"><br>
        Distance to next: <input type="number" class="petrol-dist" value="350" min="0" step="10"> km
    `;
    container.appendChild(div);
    updateAllTrips();
}

function updatePetrolTrip() {
    const stops = document.querySelectorAll('#petrol-stops-container .trip-stop');
    let level = +document.querySelector('.petrol-start-level')?.value || 90;
    let totalDist = 0, totalUsed = 0, totalCost = 0;

    document.querySelectorAll('#petrol-stops-container .petrol-dist').forEach((distInput, i) => {
        const dist = +distInput.value || 0;
        const used = (dist / 100) * CONS_PETROL;
        totalDist += dist;
        totalUsed += used;

        if (i < stops.length) {
            const stop = stops[i];
            const added = +stop.querySelector('.petrol-added')?.value || 0;
            const price = +stop.querySelector('.petrol-price')?.value || 1.50;
            totalCost += added * price;
            level = Math.min(100, level - (used / TANK_LITERS * 100) + (added / TANK_LITERS * 100));
        }
    });

    document.getElementById('petrol-total-dist').textContent = totalDist;
    document.getElementById('petrol-total-used').textContent = totalUsed.toFixed(1);
    document.getElementById('petrol-total-cost').textContent = totalCost.toFixed(2);
}

// Unified update trigger
function updateAllTrips() {
    updateEvTrip();
    updateDieselTrip();
    updatePetrolTrip();
}

// Listen to all changes
document.addEventListener('input', e => {
    if (e.target.type === 'number') {
        updateAllTrips();
    }
});

// Initial calculation
updateAllTrips();
</script>
</body>
</html>
